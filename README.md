# WebAUF

![qr](docs/QR.png)

# –û–ø–∏—Å–∞–Ω–∏–µ

![ph1](docs/ph1.jpg)
![ph2](docs/ph2.jpg)
![ph3](docs/ph3.jpg)

[–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è](https://docs.google.com/presentation/d/11jLLNxYP66JuzLdZFsEfOmXil3LCTsE58ldrIdV-BcE/edit?usp=sharing)

## –°—Ç–µ–∫-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
* Python
* Django
* GraphQL
* PostgreSQL
* Docker + Docker-compose
* Gunicorn
* TypeScript
* React
* Nginx
---


## Git flow

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–µ—Ç–∫–∏

**develop:** –æ—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—á–∞—è –≤–µ—Ç–≤—å. –í—Å–µ –Ω–æ–≤—ã–µ –≤–µ—Ç–∫–∏ —Å–æ–∑–¥–∞—ë–º –∏–∑ –Ω–µ—ë.  –û–Ω–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–¥, –≥–æ—Ç–æ–≤—ã–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

**release**: —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥. –ö–æ–¥ –≤ —ç—Ç–æ–π –≤–µ—Ç–∫–µ –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω.

**–ù–µ–ª—å–∑—è** –¥–µ–ª–∞—Ç—å –∫–æ–º–º–∏—Ç—ã –Ω–∞–ø—Ä—è–º—É—é –≤¬†`develop`¬†–∏¬†`release,` —Ç–æ–ª—å–∫–æ –≤ —Å–≤–æ–∏ —Ñ–∏—á–∏-–≤–µ—Ç–∫–∏ (feature branches).

### –í–µ—Ç–∫–∏ –∏ —Ç–∞—Å–∫–∏

* –ù–∞ –∫–∞–∂–¥—É—é –∑–∞–¥–∞—á—É —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–∞—è –≤–µ—Ç–∫–∞. –í—Å—è —Ä–∞–±–æ—Ç–∞ –Ω–∞–¥ –∑–∞–¥–∞—á–µ–π –≤–µ–¥–µ—Ç—Å—è –≤ —ç—Ç–æ–π –≤–µ—Ç–∫–µ.

* –§–æ—Ä–º–∞—Ç –∏–º–µ–Ω–∏ –≤–µ—Ç–∫–∏: (—Ñ–∏—á–∞ **feature/name**, —Ñ–∏–∫—Å **fix/name**) –∏ –æ–¥–Ω–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö —Å–ª–æ–≤, –æ–ø–∏—Å—ã–≤–∞—é—â–∏—Ö –∑–∞–¥–∞—á—É, —á–µ—Ä–µ–∑ –¥–µ—Ñ–∏—Å—ã.

* –°–º–µ—Ä–¥–∂–µ–Ω–Ω—ã–µ –≤–µ—Ç–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ PR, **–Ω–æ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–Ω—è—Ç—ã, –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –∏ –≤–Ω–µ—Å–µ–Ω—ã –ø—Ä–∞–≤–∫–∏.**

*  –°–ª–µ–¥—É—é—â—É—é –≤–µ—Ç–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –≤ –∏–¥–µ–∞–ª–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –ø—Ä–∏–Ω—è–ª–∏ –∏ —Å–º–µ—Ä–¥–∂–∏–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–∞–¥–∞—á–∏ —Å –æ–¥–Ω–æ–π –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö –≤–µ—Ç–æ–∫ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–¥–µ–ª—ã–≤–∞—Ç—å –≤ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ç–∫–∞—Ö —Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –≤–Ω–µ—Å–µ–Ω—ã –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ PR.

* –ö–∞–∂–¥—ã–π PR –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–∞–±–æ—á–µ–π –≤–µ—Ä—Å–∏–µ–π –ø—Ä–æ–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–ª–∏ –∑–∞–ª–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

* –ú–æ–∂–Ω–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –¥–µ–ª–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á –∏ —Å–¥–∞–≤–∞—Ç—å –∏—Ö —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ, –Ω–æ —Ç–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ –æ–¥–Ω–æ–º—É –∏–∑ PR –≤ –∫–∞–∂–¥—É—é –≤–µ—Ç–∫—É –∏–∑ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á

### –ö–∞–∫ –ø–∏—Å–∞—Ç—å –∫–æ–º–º–∏—Ç—ã

**4 –≤–∏–¥–∞ –∫–æ–º–º–∏—Ç–æ–≤**

`[*]` - —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥\–∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤

`[+]` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏—á–∏

`[-]` - —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞\—Ñ–∏—á–∏

`[~]` - –ø—Ä–∞–≤–∫–∏, –Ω–µ –≤–ª–∏—è—é—â–∏–µ –Ω–∞ –ª–æ–≥–∏–∫—É –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–∏–Ω—Ç–µ—Ä—ã)

**–í –∫–∞–∂–¥–æ–º –∫–æ–º–º–∏—Ç–µ —Å–ª–µ–¥—É–µ—Ç –ø–∏—Å–∞—Ç—å Reason(R:) –∏ fixed by(FB:)**

**R**: –ø—Ä–∏—á–∏–Ω–∞ –∫–æ–º–º–∏—Ç–∞, —á—Ç–æ —ç—Ç–æ—Ç –∫–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–∏–ª

**FB**: –∫–∞–∫ –∏—Å–ø—Ä–∞–≤–∏–ª–∏, –∫–∞–∫–∏–º —Å–ø–æ—Å–æ–±–æ–º —Ä–µ—à–∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—É

**–ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∫–æ–º–º–∏—Ç–∞:**

[~] –ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ lint

R: –∫–æ–¥ –±—ã–ª –Ω–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º –∏ –ø–ª–æ—Ö–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º

FB: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª eslint –∏ prettier

### –ö–∞–∫ –æ—Ñ–æ—Ä–º–ª—è—Ç—å PR

1. **–ó–∞–≥–æ–ª–æ–≤–æ–∫**

–í –∑–∞–≥–æ–ª–æ–≤–∫–µ —Å–ª–µ–¥—É–µ—Ç –Ω–∞–∑–≤–∞—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (—á—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ, –∫—Ä–∞—Ç–∫–æ). –í —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ –Ω–∞–¥–æ —É–∫–∞–∑–∞—Ç—å `BUGFIX` (–≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤) –∏–ª–∏ `FEAT` (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞). –ï—Å–ª–∏ PR –µ—â—ë –Ω–µ –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ—Å–º–æ—Ç—Ä—É, —Å–ª–µ–¥—É–µ—Ç –ø–æ–º–µ—Ç–∏—Ç—å –µ–≥–æ –∫–∞–∫ —á–µ—Ä–Ω–æ–≤–∏–∫ (Draft).

2. **–û–ø–∏—Å–∞–Ω–∏–µ**

–í –æ–ø–∏—Å–∞–Ω–∏–∏ –µ—Å—Ç—å –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—É–Ω–∫—Ç–∞:

* –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ (–∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)

* –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ (–æ–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞)
h
3. **Reviewer**

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–¥–µ–ª–∞—Ç—å review-request** –Ω–∞ [@lyaguxafrog](https://github.com/lyaguxafrog), –µ—Å–ª–∏ –∑–∞–¥–∞—á–∞ —Å–≤—è–∑–∞–Ω–∞ —Å Backend'–æ–º –∏–ª–∏ CI/CD, –∏–ª–∏ [@talkingmachine](https://github.com/talkingmachine), –µ—Å–ª–∏ –∑–∞–¥–∞—á–∞ —Å–≤—è–∑–∞–Ω–∞ —Å Frontend'–æ–º.

### –û–±—ä–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ PR

–ò–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–∞–∂–¥–æ–º mr –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ –±–æ–ª–µ–µ 500 —Å—Ç—Ä–æ–∫ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –≤ —Å—É–º–º–µ).


## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:

### Backend

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ [vscode](https://code.visualstudio.com/) –∏ [vscode-remote-containers](https://code.visualstudio.com/docs/remote/containers).

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
–î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:
```bash
./deploy.sh config
```

### Environment variables
 * `SECRET_KEY` - –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–∂–∞–Ω–≥–æ, –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: https://djecrety.ir/
 * `DEBUG` - –§–ª–∞–≥ –¥–ª—è –¥–µ–±–∞—à–∞
* `DB_NAME` - PostgreSQL db name.
* `DB_USER` - PostgreSQL db user.
* `DB_PASSWORD` - PostgeSQL db password.


### Codding

–î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π:

```bash
./manage.sh migrate
```

–ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å django-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
./manage.sh app
```
–ö–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ —Å–ª–µ–¥—É—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:
```
app/
‚îú‚îÄ‚îÄ admin
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ apps.py
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ models
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ schema
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ schema.py
‚îî‚îÄ‚îÄ services
    ‚îî‚îÄ‚îÄ __init__.py
```
–î–∞–º–ø–Ω—É—Ç—å GQL-–°—Ö–µ–º—É:
```bash
./manage.sh gql
```


–°–æ–∑–¥–∞—Ç—å —Å—É–ø–µ—Ä—é–∑–µ—Ä–∞:
```bash
./manage.sh su
```


–ó–∞–π–¥–∏—Ç–µ –Ω–∞  http://localhost:8000/admin  –¥–ª—è –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000/api —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ graphql api sandbox.


### Deploy
–î–ª—è –¥–µ–ø–ª–æ—è –Ω—É–∂–Ω–æ:

1. –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥:
```bash
./deplo.sh config
```

2. –°–æ–±—Ä–∞—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:
```bash
./deploy.sh build
```

3. –°–∫–∞—á–∞—Ç—å TLS-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç:
```bash
./deploy.sh ssl
```

4. –î–µ–ø–ª–æ–π!
```bash
./deploy.sh
```

–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ –æ–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞  http://0.0.0.0/


&copy; Gen by [PBD](https://github.com/lyaguxafrog/python-backend-devcontainers) with üíö
